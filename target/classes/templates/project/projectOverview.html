<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    .collapsible {
        background-color: #777;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: center;
        outline: none;
        font-size: 15px;
    }

    .active, .collapsible:hover {
        background-color: #555;
    }

    .content {
        padding: 0 18px;
        width: 100%;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }

    .collapsible:after {
        content: '\02795'; /* Unicode character for "plus" sign (+) */
        font-size: 13px;
        color: white;
        float: right;
        margin-left: 5px;
    }

    .active:after {
        content: "\2796"; /* Unicode character for "minus" sign (-) */
    }
</style>



<!--action="/createProject" method="post" onsubmit="return change()" Calls a function in the method. -->
<!-- onsubmit="click" Project loop 1  -->
<div th:border="1" th:each="project, i : ${user.getProjects()}">
    <form  method="post" onclick="return func()">
        <button type="button"  class="collapsible"><p th:text="${project.getName()}" th:class="${i.index}"></p></button>
        <div class="content">

            <div th:border="1" th:each="task, j : ${user.getProjects().get(i.index).getTasks()}">
                <form  method="post" onsclick="return func()">
                    <button type="button"  class="collapsible"><p th:text="${task.getTaskName()}"></p></button>
                    <div class="content">

                        <div th:border="1" th:each="subtask, n : ${user.getProjects().get(j.index).getTasks().get(j.index).getSubtasks()}">
                            <form  method="post" onsclick="return func()">
                                <button type="button"  class="collapsible"><p th:text="${subtask.getSubtaskName()}"></p></button>
                                <div class="content">

                                </div></form></div></div></form></div></div></form></div>

                    <!-- Task loop 2-->

<!--
            <div th:border="1" th:each="task : ${tasks}">
                <form th:action="@{/rerun/{id}(id=${task.getTaskName()})}" th:object="${task}">
                    <button type="button" class="collapsible"><p th:text="${task.getTaskName()}"></p></button>
                    <div class="content">
                        <span> Task start: <span th:text="${task.getStartDate()}"></span></span>
                        <br>
                        <span> Task end: <span th:text="${task.getFinishDate()}"></span></span>
                        <br>
                        <span> Estimated cost: <span th:text="${task.getCost()}"></span></span>
                    </div></form></div></div></form></div>


                                               <div th:border="1" th:each="subtask : ${subtasks}">
                                                   <button type="button" class="collapsible"><p th:text="${subtask.getSubtaskName()}"></p></button>
                                                   <div class="content">
                                                       <span> Subtask start: <span th:text="${subtask.getStartDate()}"></span></span>
                                                       <br>
                                                       <span> Subtask end: <span th:text="${project.getFinish()}"></span></span>
                                                       <br>
                                                       <span> Estimated cost: <span th:text="${project.getBudget()}"></span></span>
                                                   </div></div></div></form></div></div></form></div>
                       -->
            <!-- SubTask loop 3-->
<!-- Hvis vi bruger Button, kan vi ikke køre den form, hvis vi bruger submit, kan vi godt bruge form, som sender id videre.
 men så har den svært ved at komme tilbage på siden /endpoint. 3-->

<!-- Hvis vi skal køre det på den her måde (hvilket ser ret nice ud) så skal
vi ændre i vores flow i vores Controllere. Alle metoder skal nok laves om og klasserne skal merges en smule.-->

<!-- Vi skal generelt tænke flowet anderledes, da "alt" data skal være tilgængelig fra start og der skal være
mulighed for at tilføje mere data, hvilket er ret ligetil. -->




<script>
    function func() {


        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.display === "block") {
                    content.style.display = "none";
                } else {
                    content.style.display = "block";
                }
            });
        }
    }
</script>


</body>
</html>